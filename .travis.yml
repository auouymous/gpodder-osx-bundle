os: osx
env:
  global:
    - secure: "g65QqfmGXMyheUPKZbfaC390XgnavRwGI2p/O26oO1fAXCja8A00n6gYZCNjqdSaD2hod4ldmN3fKOrRnbaupwhMd+T/tDkDGiUwNqlcn/1nnOMs5078EnzevASY0FtYPkPwG9y52mSTddkXkkVmlt0gVQTx08vp4Di4ym4RAsjjpsVM2OfLX0Knwm3hBpHXYjiNSNTfd8MAVKCz06zTd+X/dPAscivMqno7HRdV1xyR+LdODJttnEybbZXuuXryikED8GHXdZv4e1LA3a6Em+9A1AVgtzX6ekYEFZS3zhirLSGzRi36WFsk73tAkGrIK/WvhaQtW9GuCAQY/CLRl5RZkU9OmYtKTd6OkBc2JHhx7fundBX4C0vMV6UpG2Uc56bvUoR8WiooLNBiMskmNh14BreR+8VAb2Zu6QYAXVn4elu/w/TqZtPNGPvGWOxN70esTkcexIIh6n3gik9tAzsx5x3orb1SmkZ78cAO+Uy63+RQkihsfISH+LFsCjb7/jxpGbvWdXijBU2bB1elulqf7QHUA22+i3dTPXb3idCmTtJMKk0/Ezdl8DjgSGx9+rLeGFSg4pAVpGTdcX7wgSCgaJMgdc89Qm277dEFtnOseJz/hGxWzAko4iw/b3Kpn07tEj1rPf3JLU6SpQHn36taPXiblljhlrfdHttDWek="
    - secure: "bseRmDAvwKuta92eXKt8YRbm4SsdimCuhJ7sHUVZhjGCgjbLW8/RldpQEvhhtzg2G5ZpnJgj4go96hKVPB9Z9p+hTWZLvwQ9c6jpqOxtdXhb8GveMutUeadgml0ksq/sM3nTjSIamlKMgqSyqBJtd4WICqg3Gb4EhoybgH2M7VNChFL3IlYh9EdGFW23Oj41fBFXVUsN+wqcWJUCVvCn59RGZ/d1tEyiH94n5w35BnlGRtCinANTNVs/zBabftpvoKZvOF2Leaeed3EbxO8BTjJ6ybJEkAtrsmYhd0vjEeckNUTPbKbAryCcZxeEzX6DeI09WNww9NNlp9Zq9uemDdwekRg0ed6G3B0zllWxlyBEKJBiF3eAHNxqkt2A6YasTmxb30F21axfo7/QibiVScCqB2JIbDQhhbuuIEu4No+XmpCyKb88mqq96Vyj8DiIcsDArWBVIS8F70Gplx6mh+LiZJqSO8Q8+2owsAanNPoCkRfivFRpCBnYYZSKHdnzs9cv4AbdI6/huD2BwFlqFL7ApoRpE4EQ2fIWvPQLofuDVXEfFZSpO968S4jrVcWjaYVi9C+/ezquyiqOhIMSCnl5BeWViZHAJ6zlBYtw5KQJk3KH5OVu6suWuVyFkSkmDQ0ma7lSGPj6tr1AgmjtRS+MSh+rfbJXdimVEwGf7D4="
jobs:
  include:
    - stage: "jbuild bootstrap .. itstool"
      script: ./travis_build.sh bootstrap openssl python3 itstool
    - stage: "jbuild meta-gtk-osx-bootstrap"
      script: ./travis_build.sh --python3 meta-gtk-osx-bootstrap
    - stage: "jbuild meta-gtk-osx-gtk3"
      script: ./travis_build.sh --python3 meta-gtk-osx-gtk3
    - stage: "jbuild pycairo pygobject3"
      script: ./travis_build.sh --python3 pycairo pygpobject3
    - stage: "jbuild icons"
      script: ./travis_build.sh --python3 tango-icon-theme shared-mime-info
    - stage: "jbuild gpodder + python deps"
      script: ./travis_build.sh --python3 gpodder
#    - stage: bundle
#      script: ./bundle.sh
#    - stage: release
#      script: ./release.sh _build/gPodder.app 3.9.10_0
#    - stage: release deps
#      script: ./release_deps.sh _build/gPodder.app 3.9.10_0
build: true

# only build on push of the travis branch for now
branches:
  only:
    - travis