os: osx
env:
  global:
    # RSYNC_HOME
    - secure: "bseRmDAvwKuta92eXKt8YRbm4SsdimCuhJ7sHUVZhjGCgjbLW8/RldpQEvhhtzg2G5ZpnJgj4go96hKVPB9Z9p+hTWZLvwQ9c6jpqOxtdXhb8GveMutUeadgml0ksq/sM3nTjSIamlKMgqSyqBJtd4WICqg3Gb4EhoybgH2M7VNChFL3IlYh9EdGFW23Oj41fBFXVUsN+wqcWJUCVvCn59RGZ/d1tEyiH94n5w35BnlGRtCinANTNVs/zBabftpvoKZvOF2Leaeed3EbxO8BTjJ6ybJEkAtrsmYhd0vjEeckNUTPbKbAryCcZxeEzX6DeI09WNww9NNlp9Zq9uemDdwekRg0ed6G3B0zllWxlyBEKJBiF3eAHNxqkt2A6YasTmxb30F21axfo7/QibiVScCqB2JIbDQhhbuuIEu4No+XmpCyKb88mqq96Vyj8DiIcsDArWBVIS8F70Gplx6mh+LiZJqSO8Q8+2owsAanNPoCkRfivFRpCBnYYZSKHdnzs9cv4AbdI6/huD2BwFlqFL7ApoRpE4EQ2fIWvPQLofuDVXEfFZSpO968S4jrVcWjaYVi9C+/ezquyiqOhIMSCnl5BeWViZHAJ6zlBYtw5KQJk3KH5OVu6suWuVyFkSkmDQ0ma7lSGPj6tr1AgmjtRS+MSh+rfbJXdimVEwGf7D4="
    # RSYNC_PORT
    - secure: "n6Av+moImDYMTw4aB4nwcpVdOMPMmyd1Ca/qD684I1auTxYgJ7dt78U/0CRD9zKCO6scV+ntdcDi96tDTrPRaqgc9IzkfakYP+UVdhGLW55b86kAXI1AN3RUGGI3ZO2NHJpt4lvfqgBiFinUvyLanHrVu6BmiVa6MhM2A6OowllXiwrANjQrd1QjiSfhj7qt93DfYphwrB4K5bKEwSvbbtzYVC+s/gv8nuxs3HcuDa7WFOf91GEqp+B5Yyk/ZBGz8k01cWOhgociDvMltV18samZXN2syRw+OXIwK1V1u+Q8IeC2pNbcxkMHBpQnRwLH0c2M5THseheWXwipvN1y59QlsBXvFUoJy3jeSmJyeW0+plqZ+wDNnJBjxWRHbEkNztsMAjNbTqGCwl255ff0c6dQUgzvRInmDgIAmTWRBucuBI1D2ufk4acy6XW9iasTF36fxofokD/3IZduhWjueYlJ7UG04Q6iDNjJ/09SqSIJB7WC7/7FeEG3br8/Cu1pCKXFq7QM0ElPvOm629tbR/9o7Wc4QJ2PYA5HdgVOf3v3fjFs61PhyToVgVCxiz7gD2dW7WZJF+WznUXiBJIhO4gLN6ozP/Hv9MCQpJ+tgSVnX1rJ0UwssZbXjGlXh2pkjatTsnBAW7eVuk7c0i1pPsQ1fX1KuF9V1h3RuADbjCA="
jobs:
  include:
    - stage: "jbuild bootstrap .. itstool"
      script: ./travis_build.sh bootstrap openssl python3 itstool
    - stage: "jbuild meta-gtk-osx-bootstrap"
      script: ./travis_build.sh --python3 meta-gtk-osx-bootstrap
    - stage: "jbuild meta-gtk-osx-gtk3"
      script: ./travis_build.sh --python3 meta-gtk-osx-gtk3
    - stage: "jbuild pycairo pygobject3"
      script: ./travis_build.sh --python3 pycairo pygpobject3
    - stage: "jbuild icons"
      script: ./travis_build.sh --python3 tango-icon-theme shared-mime-info
    - stage: "jbuild gpodder + python deps"
      script: ./travis_build.sh --python3 gpodder
#    - stage: bundle
#      script: ./bundle.sh
#    - stage: release
#      script: ./release.sh _build/gPodder.app 3.9.10_0
#    - stage: release deps
#      script: ./release_deps.sh _build/gPodder.app 3.9.10_0
build: true

# only build on push of the travis branch for now
branches:
  only:
    - travis